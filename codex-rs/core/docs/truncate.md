# truncate.rs

## 文件作用

`truncate.rs` 提供文本截断功能，用于在上下文窗口限制下缩短过长的文本。

## 主要函数

### truncate_middle()
从中间截断文本。

**参数:**
- `text: &str` - 原始文本
- `max_bytes: usize` - 最大字节数

**返回:** `(String, usize)` - (截断后的文本, 被截断的字节数)

**功能:**
- 保留文本开头和结尾
- 中间插入截断标记（如 "... [N tokens truncated] ..."）
- 确保总长度不超过限制

## 与其他模块的关系

**被依赖模块:**
- `compact` - 压缩历史时截断过长消息
- 其他需要限制文本长度的模块
